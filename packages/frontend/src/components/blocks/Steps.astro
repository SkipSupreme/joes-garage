---
interface Props {
  eyebrow?: string;
  heading: string;
  subtitle?: string;
  steps: Array<{ title: string; description: string }>;
  ctaText?: string;
  ctaLink?: string;
}

const { eyebrow, heading, subtitle, steps, ctaText, ctaLink } = Astro.props;
---

<section class="py-10 sm:py-16 lg:py-20 relative overflow-hidden">
  <div class="absolute inset-0 pattern-dots opacity-30 pointer-events-none"></div>

  <div class="relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-2xl mx-auto mb-8 sm:mb-12">
      {eyebrow && (
        <span class="text-sm font-medium text-red tracking-wider uppercase">{eyebrow}</span>
      )}
      <h2 class="mt-2 text-2xl sm:text-4xl lg:text-5xl font-display font-extrabold text-coal tracking-tight">
        {heading}
      </h2>
      {subtitle && (
        <p class="mt-3 text-base sm:text-lg text-ink-muted">
          {subtitle}
        </p>
      )}
    </div>

    <div class:list={[
      'grid gap-6 lg:gap-8 3xl:gap-12',
      steps.length <= 4 ? 'grid-cols-2 lg:grid-cols-4' : 'grid-cols-2 lg:grid-cols-3',
    ]} data-reveal-stagger>
      {steps.map((step, i) => (
        <div class="relative text-center">
          <div class:list={[
            'inline-flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-2xl font-display font-extrabold text-lg sm:text-xl mb-4',
            i === steps.length - 1 ? 'bg-red text-cream' : 'bg-coal text-red',
          ]}>
            {i + 1}
          </div>
          <h3 class="text-base sm:text-lg font-display font-bold text-coal mb-2">{step.title}</h3>
          <p class="text-sm text-ink-muted leading-relaxed">{step.description}</p>
          {i < steps.length - 1 && (
            <div class="hidden lg:block absolute top-7 left-[calc(50%+40px)] w-[calc(100%-80px)] h-px bg-gradient-to-r from-coal/20 to-transparent"></div>
          )}
        </div>
      ))}
    </div>

    {ctaText && ctaLink && (
      <div class="text-center mt-10">
        <a
          href={ctaLink}
          class="inline-flex items-center gap-2 px-8 py-4 bg-red text-cream font-bold rounded-xl hover:bg-red-light hover:shadow-xl hover:shadow-red/20 hover:-translate-y-0.5 transition-all duration-200"
        >
          {ctaText}
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
        </a>
      </div>
    )}
  </div>
</section>
